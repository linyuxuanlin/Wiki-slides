<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>Mixed Signal Fundamental Review</title>

    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/black.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" />
  </head>

  <body>
    <style type="text/css">
      .reveal p {
        text-align: left;
      }
      .reveal h2 {
        text-align: left;
      }
      .reveal h3 {
        text-align: left;
      }
    </style>
    <div class="reveal">
      <div class="slides">
        <!-- Introduce -->
        <section>
          <section data-markdown>
            <textarea data-template>
						# Mixed Signal Fundamental Review
					</textarea
            >
          </section>
        </section>

        <!-- Basics of Mixed Signal Test  -->
        <section>
          <section data-markdown>
            <textarea data-template>

						# Basics of Mixed Signal Test

						---

						Mixed signal contains both **analog** and **digital** signals. Devices processing mixed signal typically include **ADCs**, **DACs**, analog switches and multiplexers, sample-and-hold amplifiers, and so on.

						As a part of it, analog signals is signals we use in the real world such as voice or tempurature, it's continuous in both time and amplitude. To process analog signals into computers, we need to convert them to digital signals, as it's discrete in both time and amplitude.

						Note:
						混合信号处理通常包括模拟和数字信号处理，这类型的设备主要有ADC、DAC、模拟开关之类的。

						在现实世界中我们接触的通常是模拟信号，像声音温度，他们在时间和幅度上都是连续的，如果我们要对它们进行采集和处理，就需要把它们变成离散的数字信号。需要注意的是，模拟量是有无限的分辨率，但转化为数字量后，就会丢失掉一些精度了。

						---

						## Sampling Theory

						<img data-src="https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220929094314.png" style="height: 400px;" />

						Sampling theory applies to the signal to be periodic, or errors will be introduced.

						Note:
						从模拟量到数字量，首要的步骤是采样，可以看到这是采样过程的简图。

						另外，采样定理要求是信号必须是周期性的。
						---

						### Nyquist Theorem

						We use **Nyquist Theorem（奈奎斯特定理）** to gain the minimum sampling frequency when sampling signals:

						$$
						F_s≥2F_i
						$$

						We must sample at a rate higher than twice the highest frequency of interest, to be able to recreate a signal from its samples and avoid losing information.

						Note:
						奈奎斯特定理规定采样频率必须是最高信号频率的两倍以上，这样才能保底还原出原来的信号。
						---

						If we sample at a frequency that lower that the Nyquist rate, it will exhibit a phenomenon called **aliasing（混叠）**(unwanted components) when we try to convert it back to a continuous time signal, and some of the frequencies in the original signal may be lost.

						Note:
						如果采样频率达不到这个数值，在还原信号时就有可能产生混叠现象，无法准确还原出原信号。
						---

						To minimize aliasing problem, we need to remove the frequency greater than $\frac{F_s}{2}$ of the signal, via the anti-aliasing filter (e.g. low-pass-filter):

						![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220930154335.png)

						Note:
						一种减少混叠影响的方法是，加抗混叠低通滤波器，把高于 1/2 采样频率的信号给滤掉。
						---

						### Coherent Sampling

						If a time sample set does not contain a precise integer number of cycles, **spectral leakage（频谱泄露）** will occur.

						Note:
						接下来介绍相干采样，也叫连贯性采样。它存在的理由是，在快速傅里叶变换时，如果一个采样不连续，拼接的时候就会导致频谱泄露。
						---

						**Coherent sampling（相干采样）** is to ensure the continuity of sampling and prevent spectral leakage, it guarantees that a sample set (a series of samples which represent analog signal) has a fixed and well defined relationship between the sample frequency $F_s$, the of samples $N$, the test signal frequency $F_i$, and the number of test signal periods sampled $M$:

						$$
						\frac{M}{N}=\frac{F_i}{F_s}
						$$

						Note:
						相干采样就是用来避免频谱泄露，它规定了采样频率、测试信号的频率、样本数和采样周期数的关系。
						---

						The total time required to take all samples is called the **Unit Test Period (UTP)** and requires $M$ cycles of the test signal, which has frequency $F_i$.

						Note:
						采样一轮需要的总时间称为 UTP，需要 M 个周期的信号。
						---

						For an example, if we want to calculate the $F_s$ of continuous repeating sinewave, where $F_i$ is 1kHz, $M=3$ and $N=16$:

						<img data-src="https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220930164712.png" style="height: 350px;" />

						So we can conclude that $F_s=5.333kHz$.

						Note:
						举个例子，如果信号频率为 1kHz，采样周期数为3，样本数为16，那么就能得出采样频率应该为 5.333kHz，这样就能避免频谱泄露。
						---

						Important tips of coherent sampling:

						- Increasing $M$ and/or $N$ will increase both accuracy and test time.
						- $M$ and $N$ needs to be an integer.
						- $N$ needs to be a power of 2 when using Fast Fourier Transform (FFT).
						- $M$ and $N$ are recommended to be mutually prime（互质）so that each sample gives unique information. Described in the following.

						Note:
						相干采样需要注意的点是，M 和 N 必须为整数，如果是用快速傅里叶变换，那么 N 需要是 2 的幂，而且最好 M 和 N 是互质的，这样可以避免重复，采到更多的信息。
						---

						If $M$ and $N$ are not mutually prime ($M=3,N=12$), samples are taken at the same position in every cycle, so there is no new information:

						![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220930170300.png)

						Note:
						如果 M 和 N 不互质，就是这样的，每个周期都采同样位置的点。
						---

						If $M$ and $N$ aremutually prime ($M=3,N=16$), so they are mutually prime and every sample is
						discrete, so it gives unique information:

						![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20220930170343.png)

						Note:
						如果 M 和 N 是互质的，像这样，就能采到波形更多的细节。
						---

						## Common Frequency Analysis Algorithms

						Note:
						接下来我们看一些常用的参数。
						---

						A typical spectral components example is shown below:

						![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221002145846.png)

						Note:
						这是一个典型的频谱图，它包含 DC、基波、多次谐波和噪声成分。
						---

						There are several parameters for describing spectral components as follows:

						- Signal To Noise Ratio (SNR)（信噪比）
						- Total Harmonic Distortion (THD)（总谐波失真）
						- Signal to Noise and Distortion (SINAD)（信纳比）
						- Intermodulation Distortion (IM)（互调失真）
						- Spurious Free Dynamic Range (SFDR)（无杂散动态范围）

						Note:
						用来描述频谱图的主要的参数有这些。
						---

						### Signal To Noise Ratio (SNR)

						**Signal To Noise Ratio (SNR)** is derived by storing the value of the fundamental (signal
						power)
						first:

						![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221002151235.png)

						Note:
						SNR 是信号对噪声的比例。首先在频谱图中提取出基波的功率水平。
						---

						Then remove the DC component and harmonics (usually up to 5):

						![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221002151402.png)

						Note:
						然后把 DC、基波和所有谐波都去掉，
						---

						<small>Next sum all bins of the remaining power spectrum (the noise power) measured by the RMS value (Root Mean Squared, The analog voltage that is equal to a DC voltage containing the same amount of energy, for a sine wave, the RMS value is 0.707 times the peak value):</small>

						![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221002151646.png)

						Note:
						然后提取出所有 bin 里面噪声的 RMS 值。
						---


						Ultimately we can conclude that:

						$$
						{SNR}(dB)=10log_{10}(\frac{{Fundamental}}{{Noise\ Power}})
						$$

						SNR is usually expressed in decibels (dB), and is often a positive value (assuming the
						Fundamental
						Power is much larger than the Noise Power).

						Note:
						就能计算出以 dB 表示的 SNR 值了。注意这个式子里的两个参数是功率水平，如果用电压振幅的话，就得把前面的 10 换成 20 了。
						---

						### Total Harmonic Distortion (THD)

						<small><b>Total Harmonic Distortion (THD)</b> is derived by keeping a running sum of the total harmonic power (usually only the first five harmonics, start at the second harmonic):</small>

						![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221002155148.png)

						Note:
						总谐波失真算的是所有谐波总和与基波的一个比例。
						---

						And we can conclude that:

						$$
						{THD}(dB)=10log_{10}(\frac{{Harmonic \ Power}}{{Fundamental}})
						$$

						THD is often a negative value (assuming the Fundamental Power is much larger than the total Harmonic Power).

						Note:
						它通常是一个负值。
						---


						### Signal to Noise and Distortion (SINAD)

						**Signal to Noise and Distortion (SINAD)** is the same methodology as computing SNR, but now the power of the harmonics is added into, and only zero out the DC component.

						$$
						{SINAD}=\frac{S}{N+D}
						$$


						Note:
						信纳比是指基波比上谐波+噪声之和。
						---

						and we can conclued that:

						$$
						\because {SNR}=\frac{S}{N}, {THD}=\frac{D}{S}
						$$

						$$
						\therefore {SNR}^{-1}+{THD}=\frac {N}{S}+\frac {D}{S}=\frac {N+D}{S}={SINAD}^{-1}
						$$

						$$
						\therefore {SINAD}=({SNR}^{-1}+{THD})^{-1}
						$$

						Note:
						信纳比也可以通过信噪比和总谐波失真来算得。
						---

						### Intermodulation Distortion (IM)

						![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221018162800.png)

						Intermodulation Distortion (IM) occurs when two or more signals are used in a non-linear system. The spectrum will not only consist of the original signals, but will also contain the sum and difference of the input signals along with their harmonics.

						Note:
						互调失真可以理解为内耗，就是当有两个或以上的输入信号时，它们会打架，产生它们频率之和或差的谐波。其中在基波旁边的两个谐波影响最大。
						---

						### Spurious Free Dynamic Range (SFRD)

						<small><b>Spurious Free Dynamic Range (SFRD)</b> is derived by finding the highest element after the fundamental (ignoring the DC component):</small>

						![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221002161334.png)

						Note:
						无杂散动态范围指的是基波与下一个高峰的比值，这个高峰不一定是谐波。
						---

						Note that the highest element may or may not be a harmonic. So we can conclude that:

						$$
						{SFDR}(dB)=10log_{10}(\frac{{Fundamental}}{{Next \ Highest}})
						$$

						The Spurious Free Dynamic Range is a positive value (assuming the Fundamental Power is much
						larger
						than the next highest Spur Power.

						---

						## Architecture of Generic Mixed Signal Tester

						Note:
						接着我们看 Mix Signal 的测试系统。
						---

						<img data-src="https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221006174550.png" style="height: 500px;" />

						In the generic mixed signal tester, the AWG (AC src) and WD (AC dig) are both connected to the DUT via relay interconnects through the channel board.

						Note:
						其中最重要的是 AWG 和 WD。
						---

						### Arbitrary Waveform Generator (AWG)

						<small><b>Arbitrary Waveform Generator (AWG)</b> is a low distortion signal generator. It contains a DAC to generate an analog signal from the digital data.</small>
						
						<img data-src="https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221006175627.png" style="height: 450px;" />

						Note:
						任意信号发生器实际上是个 DAC，能通过输入的数字信号生成一个模拟信号。
						---

						LPF (Low Pass Filter) is to smooth the waveform and remove high frequency components. A set of
						data
						points for a given waveshape is stored in the waveform source memory, each time a clock occurs,
						a
						data point will pass to the DAC.

						Important parameters of AWG:

						- Maximum Peak to Peak Voltage output
						- Waveform resolution (DAC resolution)
						- Band-width
						- Waveform source memory depth
						- Output Impedance
						- Noise, THD, SNR

						### Waveform Digitizer (WD)

						**Waveform Digitizer (WD)** samples analog signals, and converts them into digital values. It
						performs the opposite operation to the AWG. It converts analog signal into digital samples that
						represent the original analog signal.

						![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221006180242.png)

						The low-pass filter limits the bandwidth of the signal in order to remove unwanted frequency
						components like noise and spurs, also provides anti-aliasing by attenuating spurs that would be
						aliased into the pass band of the filter during the ADC conversion.

						Important parameters of WD:

						- Maximum Peak to Peak input Voltage range
						- Waveform resolution (ADC resolution)
						- Band-width
						- Waveform capture memory depth
						- Input Impedance
						- Noise, THD, SNR, spur

						### Clock

						The analog and digital clocks are derived from a system wide reference clock. If there is no
						clock
						synchronization signal, the timing offset may lead to incorrect results.

						### Digital Signal Processor (DSP)

						**Digital Signal Processor (DSP)** is a specialized microprocessor to performs mathematical
						operations on arrays of digital numbers. Various algorithms like DFT and FFT are performed on
						DSP to
						transform time domain information into the frequency domain.

						The architecture of a DSP is optimized to allow fast multiplication, summing, logarithm
						calculations, squaring, and square root calculations.

						![](https://wiki-media-1253965369.cos.ap-guangzhou.myqcloud.com/img/20221007142019.png)

						The tester will carry the stored captured signal to the DSP processor through data buses.
					</textarea
            >
          </section>
        </section>

        <!--   -->
        <section>
          <section data-markdown>
            <textarea data-template> </textarea>
          </section>
        </section>

        <!-- 分隔符 -->

        <section data-markdown>
          `$$ J(\theta_0,\theta_1) = \sum_{i=0} $$`
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script src="plugin/math/math.js"></script>

    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,
        autoPlayMedia: true,
        // Learn about plugins: https://revealjs.com/plugins/

        // 切换过渡效果
        // none-无/fade-渐变/slide-飞入/convex-凸面/concave-凹面/zoom-缩放
        transition: "convex",

        // 切换过渡速度
        // default-中速/fast-快速/slow-慢速
        transitionSpeed: "fast", // default/fast/slow

        markdown: {
          smartypants: true,
        },

        // 预加载幻灯片数
        viewDistance: 3,

        plugins: [
          RevealMarkdown,
          RevealHighlight,
          RevealNotes,
          RevealMath.KaTeX,
        ],
      });
    </script>
  </body>
</html>
